# Настройки API
API_PORT=7555
DEBUG=false

# Настройки OCR
OCR_LANGUAGES=rus+eng

# Настройки обработки
PROCESSING_TIMEOUT_SECONDS=300

# Настройки производительности
# Количество worker-процессов uvicorn
# Для разработки: 1
# Для продакшена рекомендуется: 2 * (количество ядер CPU) + 1
WORKERS=1

# Настройки обработки файлов
MAX_FILE_SIZE=20971520  # 20MB в байтах

# Настройки архивов
MAX_ARCHIVE_SIZE=20971520     # 20MB
MAX_EXTRACTED_SIZE=104857600  # 100MB
MAX_ARCHIVE_NESTING=3

# ===========================================
# НАСТРОЙКИ ЗАЩИТЫ ОТ DoS АТАК
# ===========================================

# Включить/выключить ограничения ресурсов для дочерних процессов
ENABLE_RESOURCE_LIMITS=true

# Максимальное потребление памяти дочерними процессами (в байтах)
MAX_SUBPROCESS_MEMORY=1073741824  # 1GB - базовый лимит

# Максимальное потребление памяти для LibreOffice (в байтах)
# LibreOffice может потреблять больше памяти при конвертации сложных документов
MAX_LIBREOFFICE_MEMORY=1610612736  # 1.5GB

# Максимальное потребление памяти для Tesseract (в байтах)
# Tesseract обычно потребляет меньше памяти, но может быть требователен к большим изображениям
MAX_TESSERACT_MEMORY=536870912  # 512MB

# Максимальное разрешение для OCR изображений (в пикселях)
# Изображения больше этого размера будут отклонены
MAX_OCR_IMAGE_PIXELS=52428800  # 50MP (например, 7071x7071 или 10000x5243)

# ===========================================
# РЕКОМЕНДАЦИИ ПО НАСТРОЙКЕ
# ===========================================

# Для небольших систем (2-4GB RAM):
# MAX_SUBPROCESS_MEMORY=536870912      # 512MB
# MAX_LIBREOFFICE_MEMORY=1073741824    # 1GB
# MAX_TESSERACT_MEMORY=268435456       # 256MB

# Для средних систем (8-16GB RAM):
MAX_SUBPROCESS_MEMORY=1073741824     # 1GB
MAX_LIBREOFFICE_MEMORY=2147483648    # 2GB
MAX_TESSERACT_MEMORY=536870912       # 512MB

# Для крупных систем (32GB+ RAM):
# MAX_SUBPROCESS_MEMORY=2147483648     # 2GB
# MAX_LIBREOFFICE_MEMORY=4294967296    # 4GB
# MAX_TESSERACT_MEMORY=1073741824      # 1GB

# Для отключения ограничений (НЕ РЕКОМЕНДУЕТСЯ в production):
# ENABLE_RESOURCE_LIMITS=false

# Логирование
LOG_LEVEL=INFO 