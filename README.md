# Text Extraction API for RAG

API –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è —Ç–µ–∫—Å—Ç–∞ –∏–∑ —Ñ–∞–π–ª–æ–≤ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤, –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–π –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –≤–µ–∫—Ç–æ—Ä–Ω—ã—Ö –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–π (embeddings) –≤ —Å–∏—Å—Ç–µ–º–∞—Ö RAG (Retrieval-Augmented Generation).

## –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- üîß **–®–∏—Ä–æ–∫–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Ñ–æ—Ä–º–∞—Ç–æ–≤**: PDF, DOCX, PPT, –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è, —Ç–∞–±–ª–∏—Ü—ã, –∏—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ –∏ –º–Ω–æ–≥–æ–µ –¥—Ä—É–≥–æ–µ
- üíª **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –∫–æ–¥–∞**: –ë–æ–ª–µ–µ 50 —è–∑—ã–∫–æ–≤ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è –∏ —Ñ–æ—Ä–º–∞—Ç–æ–≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- üñºÔ∏è **OCR**: –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è—Ö (—Ä—É—Å—Å–∫–∏–π –∏ –∞–Ω–≥–ª–∏–π—Å–∫–∏–π —è–∑—ã–∫–∏)
- üöÄ **–í—ã—Å–æ–∫–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å —Ç–∞–π–º–∞—É—Ç–∞–º–∏
- üìä **–°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –≤—ã–≤–æ–¥**: –û–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ –∏–∑ —Ä–∞–∑–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
- üîí **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: –ó–∞—â–∏—Ç–∞ –æ—Ç path traversal, –ø–æ–¥–¥–µ–ª–∫–∏ —Ç–∏–ø–æ–≤ —Ñ–∞–π–ª–æ–≤ –∏ DoS-–∞—Ç–∞–∫
- üê≥ **Docker**: –ì–æ—Ç–æ–≤—ã–π –∫ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
- üìù **–ê–≤—Ç–æ–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: Swagger UI –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- üîÑ **–ì–∏–±–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞**: –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

## –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã

### –î–æ–∫—É–º–µ–Ω—Ç—ã
- PDF (—Å OCR –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π)
- DOCX, DOC
- ODT, RTF

### –ü—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–∏
- PPTX, PPT (–≤–∫–ª—é—á–∞—è –∑–∞–º–µ—Ç–∫–∏ —Å–ø–∏–∫–µ—Ä–∞)

### –¢–∞–±–ª–∏—Ü—ã
- XLSX, XLS, ODS
- CSV

### –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (OCR)
- JPG, JPEG, PNG
- TIFF, TIF, BMP, GIF

### –ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
#### –Ø–∑—ã–∫–∏ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è
- **Python**: `.py`, `.pyx`, `.pyi`, `.pyw`
- **JavaScript/TypeScript**: `.js`, `.jsx`, `.ts`, `.tsx`, `.mjs`, `.cjs`
- **Java**: `.java`, `.jav`
- **C/C++**: `.c`, `.cpp`, `.cxx`, `.cc`, `.c++`, `.h`, `.hpp`, `.hxx`, `.h++`
- **C#**: `.cs`, `.csx`
- **PHP**: `.php`, `.php3`, `.php4`, `.php5`, `.phtml`
- **Ruby**: `.rb`, `.rbw`, `.rake`, `.gemspec`
- **Go**: `.go`, `.mod`, `.sum`
- **Rust**: `.rs`, `.rlib`
- **Swift**: `.swift`
- **Kotlin**: `.kt`, `.kts`
- **Scala**: `.scala`, `.sc`
- **R**: `.r`, `.R`, `.rmd`, `.Rmd`
- **SQL**: `.sql`, `.ddl`, `.dml`
- **Shell**: `.sh`, `.bash`, `.zsh`, `.fish`, `.ksh`, `.csh`, `.tcsh`
- **PowerShell**: `.ps1`, `.psm1`, `.psd1`
- **Perl**: `.pl`, `.pm`, `.pod`, `.t`
- **Lua**: `.lua`
- **1C:Enterprise**: `.bsl`
- **OneScript**: `.os`

#### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
- **–û–±—â–∏–µ**: `.ini`, `.cfg`, `.conf`, `.config`, `.properties`
- **TOML**: `.toml`
- **YAML**: `.yaml`, `.yml`
- **JSON**: `.json`, `.jsonc`, `.jsonl`, `.ndjson`
- **XML**: `.xml`

#### –í–µ–±-—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏
- **CSS**: `.css`, `.scss`, `.sass`, `.less`, `.styl`
- **HTML**: `.html`, `.htm`

#### –†–∞–∑–º–µ—Ç–∫–∞ –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- **Markdown**: `.md`, `.markdown`
- **LaTeX**: `.tex`, `.latex`
- **reStructuredText**: `.rst`
- **AsciiDoc**: `.adoc`, `.asciidoc`

#### –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã
- **Docker**: `.dockerfile`, `.containerfile`
- **Makefile**: `.makefile`, `.mk`, `.mak`
- **Git**: `.gitignore`, `.gitattributes`, `.gitmodules`

### –≠–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∞—è –ø–æ—á—Ç–∞ –∏ –∫–Ω–∏–≥–∏
- **Email**: `.eml`, `.msg`
- **–≠–ª–µ–∫—Ç—Ä–æ–Ω–Ω—ã–µ –∫–Ω–∏–≥–∏**: `.epub`

### –¢–µ–∫—Å—Ç–æ–≤—ã–µ —Ñ–∞–π–ª—ã
- TXT

### –ê—Ä—Ö–∏–≤—ã (–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ñ–æ—Ä–º–∞—Ç–∞)
–ü—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ –∞—Ä—Ö–∏–≤–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—à–∏–±–∫—É —Å —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ–º —Ä–∞—Å–ø–∞–∫–æ–≤–∞—Ç—å –∞—Ä—Ö–∏–≤:
- ZIP, RAR, 7Z, TAR, GZ, BZ2, XZ –∏ –¥—Ä—É–≥–∏–µ

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

```bash
git clone <repository-url>
cd text-extraction-api
```

### 2. –ó–∞–ø—É—Å–∫ –≤ Docker (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
# –°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
make dev

# –ò–ª–∏ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞
make prod
```

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
curl http://localhost:7555/health

# –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤
curl http://localhost:7555/v1/supported-formats/
```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ API

### –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã

#### `GET /` - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ API
```bash
curl http://localhost:7555/
```

#### `GET /health` - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è
```bash
curl http://localhost:7555/health
```

#### `GET /v1/supported-formats/` - –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã
```bash
curl http://localhost:7555/v1/supported-formats/
```

#### `POST /v1/extract/` - –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞
```bash
curl -X POST \
  -F "file=@document.pdf" \
  http://localhost:7555/v1/extract/
```

### –ü—Ä–∏–º–µ—Ä—ã –æ—Ç–≤–µ—Ç–æ–≤

#### –£—Å–ø–µ—à–Ω–æ–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ
```json
{
  "status": "success",
  "filename": "document.pdf",
  "text": "–ò–∑–≤–ª–µ—á–µ–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç –∏–∑ –¥–æ–∫—É–º–µ–Ω—Ç–∞..."
}
```

#### –û—à–∏–±–∫–∞
```json
{
  "status": "error",
  "filename": "broken.pdf",
  "message": "File is corrupted or format is not supported."
}
```

### –ö–æ–¥—ã –æ—à–∏–±–æ–∫

- `400` - –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –∑–∞–ø—Ä–æ—Å (–æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç Content-Length)
- `413` - –§–∞–π–ª —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–π (>20MB)
- `415` - –ù–µ–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–π —Ñ–æ—Ä–º–∞—Ç, –∞—Ä—Ö–∏–≤ –∏–ª–∏ –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ç–∏–ø–∞ —Ñ–∞–π–ª–∞
- `422` - –ü–æ–≤—Ä–µ–∂–¥–µ–Ω–Ω—ã–π —Ñ–∞–π–ª –∏–ª–∏ –ø—É—Å—Ç–æ–π
- `504` - –ü—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç –≤—Ä–µ–º–µ–Ω–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏

### –ü—Ä–∏–º–µ—Ä—ã –æ—à–∏–±–æ–∫ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

```json
{
  "status": "error",
  "filename": "document.pdf",
  "message": "–û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –∑–∞–≥–æ–ª–æ–≤–æ–∫ Content-Length. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ —É–∫–∞–∑–∞–Ω –≤ –∑–∞–ø—Ä–æ—Å–µ."
}
```

```json
{
  "status": "error",
  "filename": "malicious.txt",
  "message": "–†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ñ–∞–π–ª–∞ –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –µ–≥–æ —Å–æ–¥–µ—Ä–∂–∏–º–æ–º—É. –í–æ–∑–º–æ–∂–Ω–∞—è –ø–æ–¥–¥–µ–ª–∫–∞ —Ç–∏–ø–∞ —Ñ–∞–π–ª–∞."
}
```

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

API –≤–∫–ª—é—á–∞–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ —É—Ä–æ–≤–Ω–µ–π –∑–∞—â–∏—Ç—ã:

### üõ°Ô∏è –°–∞–Ω–∏—Ç–∏–∑–∞—Ü–∏—è –∏–º–µ–Ω —Ñ–∞–π–ª–æ–≤
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ –∏–º–µ–Ω —Ñ–∞–π–ª–æ–≤ –æ—Ç –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ –æ–ø–∞—Å–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤
- –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –∞—Ç–∞–∫ —Ç–∏–ø–∞ path traversal (`../../../etc/passwd`)
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –±–µ–∑–æ–ø–∞—Å–Ω—ã—Ö –∏–º–µ–Ω –¥–ª—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏

### üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤ —Ñ–∞–π–ª–æ–≤
- –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è —Ñ–∞–π–ª–∞ –µ–≥–æ —Ä–µ–∞–ª—å–Ω–æ–º—É —Å–æ–¥–µ—Ä–∂–∏–º–æ–º—É
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ MIME-—Ç–∏–ø–æ–≤ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∏—Å—Ç–∏–Ω–Ω–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∞
- –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏ –∏—Å–ø–æ–ª–Ω—è–µ–º—ã—Ö —Ñ–∞–π–ª–æ–≤ –ø–æ–¥ –≤–∏–¥–æ–º —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö

### üö´ –ó–∞—â–∏—Ç–∞ –æ—Ç DoS-–∞—Ç–∞–∫
- –û–±—è–∑–∞—Ç–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –∑–∞–≥–æ–ª–æ–≤–∫–∞ `Content-Length`
- –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤ –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞ —Ñ–∞–π–ª–∞ (20MB)

### üìã –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –ø–æ–ø—ã—Ç–æ–∫ –Ω–∞—Ä—É—à–µ–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –æ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
- –¢—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∞ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã—Ö —É–≥—Ä–æ–∑

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
# –ü–æ—Ä—Ç API (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 7555)
API_PORT=7555

# –†–µ–∂–∏–º –æ—Ç–ª–∞–¥–∫–∏
DEBUG=true

# –Ø–∑—ã–∫–∏ –¥–ª—è OCR (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: rus+eng)
OCR_LANGUAGES=rus+eng

# –¢–∞–π–º–∞—É—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤ —Å–µ–∫—É–Ω–¥–∞—Ö (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 300)
PROCESSING_TIMEOUT_SECONDS=300

# –£—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
LOG_LEVEL=INFO
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ .env —Ñ–∞–π–ª–∞

```bash
cp env_example .env
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ .env –ø–æ–¥ –≤–∞—à–∏ –Ω—É–∂–¥—ã
```

## –ö–æ–º–∞–Ω–¥—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### Makefile –∫–æ–º–∞–Ω–¥—ã

```bash
# –ü–æ–º–æ—â—å
make help

# –°–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–∞
make build

# –ó–∞–ø—É—Å–∫ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
make dev

# –ó–∞–ø—É—Å–∫ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ
make prod

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞
make stop

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
make logs

# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
make test

# –û—á–∏—Å—Ç–∫–∞
make clean
```

### Docker Compose –∫–æ–º–∞–Ω–¥—ã

```bash
# –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞
docker-compose up

# –ü—Ä–æ–¥–∞–∫—à–µ–Ω
docker-compose -f docker-compose.yml -f docker-compose.prod.yml up -d

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞
docker-compose down
```

## –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è
python -m venv venv
source venv/bin/activate  # Linux/Mac
# –∏–ª–∏
venv\Scripts\activate     # Windows

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
pip install -r requirements.txt

# –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
uvicorn app.main:app --reload --host 0.0.0.0 --port 7555
```

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ main.py           # –ì–ª–∞–≤–Ω—ã–π –º–æ–¥—É–ª—å FastAPI
‚îÇ   ‚îú‚îÄ‚îÄ config.py         # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (–≤–µ—Ä—Å–∏—è 1.7.2)
‚îÇ   ‚îú‚îÄ‚îÄ extractors.py     # –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ –∏–∑ –≤—Å–µ—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ utils.py          # –£—Ç–∏–ª–∏—Ç—ã (–≤–∫–ª—é—á–∞—è —Ñ—É–Ω–∫—Ü–∏–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏)
‚îú‚îÄ‚îÄ tests/                # –¢–µ—Å—Ç–æ–≤—ã–µ —Ñ–∞–π–ª—ã (124 —Ñ–∞–π–ª–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤)
‚îú‚îÄ‚îÄ docs/
‚îÇ   ‚îî‚îÄ‚îÄ TZ.md            # –¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –∑–∞–¥–∞–Ω–∏–µ
‚îú‚îÄ‚îÄ requirements.txt      # Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (–≤–∫–ª—é—á–∞—è libmagic, werkzeug)
‚îú‚îÄ‚îÄ Dockerfile           # Docker –æ–±—Ä–∞–∑ —Å —Å–∏—Å—Ç–µ–º–Ω—ã–º–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏
‚îú‚îÄ‚îÄ docker-compose.yml   # –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞
‚îú‚îÄ‚îÄ docker-compose.prod.yml # –ü—Ä–æ–¥–∞–∫—à–µ–Ω
‚îú‚îÄ‚îÄ Makefile            # –ö–æ–º–∞–Ω–¥—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
‚îú‚îÄ‚îÄ run_tests.sh        # –°–∫—Ä–∏–ø—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
‚îú‚îÄ‚îÄ CHANGELOG.md        # –ñ—É—Ä–Ω–∞–ª –∏–∑–º–µ–Ω–µ–Ω–∏–π
‚îî‚îÄ‚îÄ README.md           # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
make test

# –ò–ª–∏ –Ω–∞–ø—Ä—è–º—É—é
./run_tests.sh
```

–°–∫—Ä–∏–ø—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:
1. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å API
2. –¢–µ—Å—Ç–∏—Ä—É–µ—Ç –≤—Å–µ —Ñ–∞–π–ª—ã –∏–∑ –ø–∞–ø–∫–∏ `tests/` (124 —Ç–µ—Å—Ç–æ–≤—ã—Ö —Ñ–∞–π–ª–∞)
3. –°–æ–∑–¥–∞–µ—Ç —Ñ–∞–π–ª—ã —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤:
   - `filename.ok.txt` - —É—Å–ø–µ—à–Ω–æ–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ
   - `filename.err.txt` - –æ—à–∏–±–∫–∏
4. –í—ã–≤–æ–¥–∏—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ–∫—Ä—ã—Ç–∏—è —Ñ–æ—Ä–º–∞—Ç–æ–≤

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- **–í—Å–µ–≥–æ —Ç–µ—Å—Ç–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤**: 124
- **–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã**: 153
- **–ü–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏**: 79% (121 –∏–∑ 153 —Ñ–æ—Ä–º–∞—Ç–æ–≤)
- **–£—Å–ø–µ—à–Ω–æ—Å—Ç—å**: 100% (–≤—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç)

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –º–æ–∂–Ω–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏:

```bash
# –¢–µ—Å—Ç –ø–æ–¥–¥–µ–ª–∫–∏ —Ç–∏–ø–∞ —Ñ–∞–π–ª–∞
curl -X POST -F "file=@malicious.exe;filename=document.txt" http://localhost:7555/v1/extract/

# –¢–µ—Å—Ç path traversal
curl -X POST -F "file=@test.txt;filename=../../../etc/passwd.txt" http://localhost:7555/v1/extract/
```

### –†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ PDF
curl -X POST -F "file=@tests/sample.pdf" http://localhost:7555/v1/extract/

# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
curl -X POST -F "file=@tests/sample.jpg" http://localhost:7555/v1/extract/

# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ DOCX
curl -X POST -F "file=@tests/sample.docx" http://localhost:7555/v1/extract/
```

## –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ API, –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –ø–æ –∞–¥—Ä–µ—Å–∞–º:

- **Swagger UI**: http://localhost:7555/docs
- **ReDoc**: http://localhost:7555/redoc

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

### –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ª–æ–≥–∏

API –≤–µ–¥–µ—Ç –ø–æ–¥—Ä–æ–±–Ω—ã–µ –ª–æ–≥–∏:
- –í—Ö–æ–¥—è—â–∏–µ –∑–∞–ø—Ä–æ—Å—ã
- –í—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏
- –û—à–∏–±–∫–∏ —Å traceback
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤

```bash
# Docker –ª–æ–≥–∏
make logs

# –ò–ª–∏ –Ω–∞–ø—Ä—è–º—É—é
docker-compose logs -f
```

## –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

- **–ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞**: 20 MB
- **–¢–∞–π–º–∞—É—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏**: 300 —Å–µ–∫—É–Ω–¥ (5 –º–∏–Ω—É—Ç)
- **–û–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞**: –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è
- **–ü—Ä–æ–≤–µ—Ä–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏**: –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ 1-5–º—Å –Ω–∞ —Ñ–∞–π–ª

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã —Ñ–∞–π–ª–æ–≤
- –°–∂–∏–º–∞–π—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π
- –ò–∑–±–µ–≥–∞–π—Ç–µ —á—Ä–µ–∑–º–µ—Ä–Ω–æ —Å–ª–æ–∂–Ω—ã—Ö PDF —Å –º–Ω–æ–∂–µ—Å—Ç–≤–æ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- –§–∞–π–ª—ã –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –∫–æ–¥–∞ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –æ—á–µ–Ω—å –±—ã—Å—Ç—Ä–æ (<1–º—Å)
- –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –Ω–∞–ª–∏—á–∏–∏ –∑–∞–≥–æ–ª–æ–≤–∫–∞ Content-Length –≤ –∑–∞–ø—Ä–æ—Å–∞—Ö

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏

| –¢–∏–ø —Ñ–∞–π–ª–∞ | –°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ |
|-----------|------------------------|
| –¢–µ–∫—Å—Ç–æ–≤—ã–µ —Ñ–∞–π–ª—ã | <1–º—Å |
| –ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ | <1–º—Å |
| –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (OCR) | 100-500–º—Å |
| PDF –¥–æ–∫—É–º–µ–Ω—Ç—ã | 50-200–º—Å |
| Office –¥–æ–∫—É–º–µ–Ω—Ç—ã | 100-1000–º—Å |
| –¢–∞–±–ª–∏—Ü—ã (–±–æ–ª—å—à–∏–µ) | 100-300–º—Å |

## –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

### Docker (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
# –°–±–æ—Ä–∫–∞
docker build -t text-extraction-api .

# –ó–∞–ø—É—Å–∫
docker run -p 7555:7555 text-extraction-api
```

### Kubernetes

```yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: text-extraction-api
spec:
  replicas: 3
  selector:
    matchLabels:
      app: text-extraction-api
  template:
    metadata:
      labels:
        app: text-extraction-api
    spec:
      containers:
      - name: api
        image: text-extraction-api:latest
        ports:
        - containerPort: 7555
        env:
        - name: API_PORT
          value: "7555"
        - name: OCR_LANGUAGES
          value: "rus+eng"
```

## –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

1. **OCR –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç**
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —É—Å—Ç–∞–Ω–æ–≤–∫—É tesseract
   - –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –Ω–∞–ª–∏—á–∏–∏ —è–∑—ã–∫–æ–≤—ã—Ö –ø–∞–∫–µ—Ç–æ–≤

2. **–û—à–∏–±–∫–∏ –ø–∞–º—è—Ç–∏**
   - –£–º–µ–Ω—å—à–∏—Ç–µ —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–æ–≤
   - –£–≤–µ–ª–∏—á—å—Ç–µ –ª–∏–º–∏—Ç—ã –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞

3. **–¢–∞–π–º–∞—É—Ç—ã**
   - –£–≤–µ–ª–∏—á—å—Ç–µ `PROCESSING_TIMEOUT_SECONDS`
   - –û–ø—Ç–∏–º–∏–∑–∏—Ä—É–π—Ç–µ –≤—Ö–æ–¥–Ω—ã–µ —Ñ–∞–π–ª—ã

### –õ–æ–≥–∏ –æ—Ç–ª–∞–¥–∫–∏

```bash
# –í–∫–ª—é—á–µ–Ω–∏–µ –æ—Ç–ª–∞–¥–∫–∏
export DEBUG=true

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ø–æ–¥—Ä–æ–±–Ω—ã—Ö –ª–æ–≥–æ–≤
docker-compose logs -f api
```

## –ö–æ–Ω—Ç—Ä–∏–±—É—Ü–∏—è

1. –§–æ—Ä–∫ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
2. –°–æ–∑–¥–∞–Ω–∏–µ –≤–µ—Ç–∫–∏ –¥–ª—è —Ñ–∏—á–∏
3. –ö–æ–º–º–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π
4. –ü—É—à –≤ –≤–µ—Ç–∫—É
5. –°–æ–∑–¥–∞–Ω–∏–µ Pull Request

## –õ–∏—Ü–µ–Ω–∑–∏—è

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –ª–∏—Ü–µ–Ω–∑–∏—Ä–æ–≤–∞–Ω –ø–æ–¥ MIT License - —Å–º. —Ñ–∞–π–ª [LICENSE](LICENSE).

## –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–î–ª—è –≤–æ–ø—Ä–æ—Å–æ–≤ –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∏:
- GitHub Issues

---

**–í–µ—Ä—Å–∏—è**: 1.7.2
**–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫**: –û–û–û "–°–û–§–¢–û–ù–ò–¢"
**–î–∞—Ç–∞**: 2025

### –ü–æ—Å–ª–µ–¥–Ω–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è (–≤–µ—Ä—Å–∏—è 1.7.2)
- ‚úÖ –£–ª—É—á—à–µ–Ω–Ω–∞—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å API
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ 50+ —è–∑—ã–∫–æ–≤ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ MIME-—Ç–∏–ø–æ–≤ —Ñ–∞–π–ª–æ–≤
- ‚úÖ –ó–∞—â–∏—Ç–∞ –æ—Ç path traversal –∞—Ç–∞–∫
- ‚úÖ –ó–∞—â–∏—Ç–∞ –æ—Ç DoS-–∞—Ç–∞–∫
- ‚úÖ –°–∞–Ω–∏—Ç–∏–∑–∞—Ü–∏—è –∏–º–µ–Ω —Ñ–∞–π–ª–æ–≤
- ‚úÖ 124 —Ç–µ—Å—Ç–æ–≤—ã—Ö —Ñ–∞–π–ª–∞ —Å –ø–æ–∫—Ä—ã—Ç–∏–µ–º 79%
- ‚úÖ –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏