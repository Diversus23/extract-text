# Text Extraction API for RAG

API –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è —Ç–µ–∫—Å—Ç–∞ –∏–∑ —Ñ–∞–π–ª–æ–≤ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤, –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–π –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –≤–µ–∫—Ç–æ—Ä–Ω—ã—Ö –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–π (embeddings) –≤ —Å–∏—Å—Ç–µ–º–∞—Ö RAG (Retrieval-Augmented Generation).

## –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- üîß **–®–∏—Ä–æ–∫–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Ñ–æ—Ä–º–∞—Ç–æ–≤**: PDF, DOCX, PPT, –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è, —Ç–∞–±–ª–∏—Ü—ã, –∏—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ –∏ –º–Ω–æ–≥–æ–µ –¥—Ä—É–≥–æ–µ
- üíª **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –∫–æ–¥–∞**: –ë–æ–ª–µ–µ 50 —è–∑—ã–∫–æ–≤ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è –∏ —Ñ–æ—Ä–º–∞—Ç–æ–≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- üñºÔ∏è **OCR**: –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è—Ö (—Ä—É—Å—Å–∫–∏–π –∏ –∞–Ω–≥–ª–∏–π—Å–∫–∏–π —è–∑—ã–∫–∏)
- üì¶ **–û–±—Ä–∞–±–æ—Ç–∫–∞ –∞—Ä—Ö–∏–≤–æ–≤**: –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ –∏–∑ —Ñ–∞–π–ª–æ–≤ –≤–Ω—É—Ç—Ä–∏ –∞—Ä—Ö–∏–≤–æ–≤ —Å —Ç–∞–π–º–∞—É—Ç–æ–º 300 —Å–µ–∫—É–Ω–¥ (ZIP, RAR, 7Z, TAR –∏ –¥—Ä.)
- üöÄ **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞**: –ù–µ–±–ª–æ–∫–∏—Ä—É—é—â–µ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö worker-–ø—Ä–æ—Ü–µ—Å—Å–æ–≤
- üìä **–°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –≤—ã–≤–æ–¥**: –û–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ –∏–∑ —Ä–∞–∑–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
- üîí **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: –ó–∞—â–∏—Ç–∞ –æ—Ç path traversal, –ø–æ–¥–¥–µ–ª–∫–∏ —Ç–∏–ø–æ–≤ —Ñ–∞–π–ª–æ–≤ –∏ DoS-–∞—Ç–∞–∫
- üê≥ **Docker**: –ì–æ—Ç–æ–≤—ã–π –∫ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
- üìù **–ê–≤—Ç–æ–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: Swagger UI –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- üß™ **–ö–æ–º–ø–ª–µ–∫—Å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: Unit, integration –∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã
- üíæ **–ü–æ–ª–Ω–æ–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ**: –ü–æ–ª–Ω–æ–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –∏–∑ DOCX (—Å –∫–æ–ª–æ–Ω—Ç–∏—Ç—É–ª–∞–º–∏, —Å–Ω–æ—Å–∫–∞–º–∏, –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏) –∏ PPTX (—Å –∑–∞–º–µ—Ç–∫–∞–º–∏ —Å–ø–∏–∫–µ—Ä–∞)
- üìã **Base64 –ø–æ–¥–¥–µ—Ä–∂–∫–∞**: –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–∞–π–ª–æ–≤ –≤ —Ñ–æ—Ä–º–∞—Ç–µ base64 —á–µ—Ä–µ–∑ JSON API –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å —Å–∏—Å—Ç–µ–º–∞–º–∏

## –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã

### –î–æ–∫—É–º–µ–Ω—Ç—ã
- PDF (—Å OCR –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π)
- DOCX, DOC (–ø–æ–ª–Ω–æ–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –≤–∫–ª—é—á–∞—è –∫–æ–ª–æ–Ω—Ç–∏—Ç—É–ª—ã, —Å–Ω–æ—Å–∫–∏, –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏)
- ODT, RTF

### –ü—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–∏
- PPTX, PPT (–ø–æ–ª–Ω–æ–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –≤–∫–ª—é—á–∞—è –∑–∞–º–µ—Ç–∫–∏ —Å–ø–∏–∫–µ—Ä–∞)

### –¢–∞–±–ª–∏—Ü—ã
- XLSX, XLS, ODS
- CSV

### –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (OCR)
- JPG, JPEG, PNG
- TIFF, TIF, BMP, GIF

### –ê—Ä—Ö–∏–≤—ã
- ZIP, RAR, 7Z
- TAR, GZ, BZ2, XZ
- TGZ, TBZ2, TXZ
- TAR.GZ, TAR.BZ2, TAR.XZ

### –ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
#### –Ø–∑—ã–∫–∏ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è
- **Python**: `.py`, `.pyx`, `.pyi`, `.pyw`
- **JavaScript/TypeScript**: `.js`, `.jsx`, `.ts`, `.tsx`, `.mjs`, `.cjs`
- **Java**: `.java`, `.jav`
- **C/C++**: `.c`, `.cpp`, `.cxx`, `.cc`, `.c++`, `.h`, `.hpp`, `.hxx`, `.h++`
- **C#**: `.cs`, `.csx`
- **PHP**: `.php`, `.php3`, `.php4`, `.php5`, `.phtml`
- **Ruby**: `.rb`, `.rbw`, `.rake`, `.gemspec`
- **Go**: `.go`, `.mod`, `.sum`
- **Rust**: `.rs`, `.rlib`
- **Swift**: `.swift`
- **Kotlin**: `.kt`, `.kts`
- **Scala**: `.scala`, `.sc`
- **R**: `.r`, `.rmd`
- **SQL**: `.sql`, `.ddl`, `.dml`
- **Shell**: `.sh`, `.bash`, `.zsh`, `.fish`, `.ksh`, `.csh`, `.tcsh`
- **PowerShell**: `.ps1`, `.psm1`, `.psd1`
- **Perl**: `.pl`, `.pm`, `.pod`, `.t`
- **Lua**: `.lua`
- **1C:Enterprise**: `.bsl`
- **OneScript**: `.os`

#### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
- **–û–±—â–∏–µ**: `.ini`, `.cfg`, `.conf`, `.config`, `.properties`
- **TOML**: `.toml`
- **YAML**: `.yaml`, `.yml`
- **JSON**: `.json`, `.jsonc`, `.jsonl`, `.ndjson`
- **XML**: `.xml`

#### –í–µ–±-—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏
- **CSS**: `.css`, `.scss`, `.sass`, `.less`, `.styl`
- **HTML**: `.html`, `.htm`

#### –†–∞–∑–º–µ—Ç–∫–∞ –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- **Markdown**: `.md`, `.markdown`
- **LaTeX**: `.tex`, `.latex`
- **reStructuredText**: `.rst`
- **AsciiDoc**: `.adoc`, `.asciidoc`

#### –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã
- **Docker**: `.dockerfile`, `.containerfile`
- **Makefile**: `.makefile`, `.mk`, `.mak`
- **Git**: `.gitignore`, `.gitattributes`, `.gitmodules`

### –≠–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∞—è –ø–æ—á—Ç–∞ –∏ –∫–Ω–∏–≥–∏
- **Email**: `.eml`, `.msg`
- **–≠–ª–µ–∫—Ç—Ä–æ–Ω–Ω—ã–µ –∫–Ω–∏–≥–∏**: `.epub`

### –¢–µ–∫—Å—Ç–æ–≤—ã–µ —Ñ–∞–π–ª—ã
- TXT

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

```bash
git clone <repository-url>
cd text-extraction-api
```

### 2. –ó–∞–ø—É—Å–∫ –≤ Docker (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
# –°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
make dev

# –ò–ª–∏ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞
make prod
```

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
curl http://localhost:7555/health

# –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤
curl http://localhost:7555/v1/supported-formats
```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ API

### –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã

#### `GET /` - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ API
```bash
curl http://localhost:7555/
```

#### `GET /health` - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è
```bash
curl http://localhost:7555/health
```

#### `GET /v1/supported-formats` - –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã
```bash
curl http://localhost:7555/v1/supported-formats
```

#### `POST /v1/extract/file` - –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞
```bash
curl -X POST \
  -F "file=@document.pdf" \
  http://localhost:7555/v1/extract/file
```

#### `POST /v1/extract/base64` - –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ –∏–∑ base64-—Ñ–∞–π–ª–∞
```bash
curl -X POST \
  -H "Content-Type: application/json" \
  -d '{
    "encoded_base64_file": "0J/RgNC40LLQtdGCINGN0YLQviDRgtC10LrRgdGCIQ==",
    "filename": "document.txt"
  }' \
  http://localhost:7555/v1/extract/base64
```

### –ü—Ä–∏–º–µ—Ä—ã –æ—Ç–≤–µ—Ç–æ–≤

#### –£—Å–ø–µ—à–Ω–æ–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ (–æ–±—ã—á–Ω—ã–π —Ñ–∞–π–ª)
```json
{
  "status": "success",
  "filename": "document.pdf",
  "files": [
    {
      "filename": "document.pdf",
      "path": "document.pdf",
      "size": 1024000,
      "type": "pdf",
      "text": "–ò–∑–≤–ª–µ—á–µ–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç –∏–∑ –¥–æ–∫—É–º–µ–Ω—Ç–∞..."
    }
  ]
}
```

#### –£—Å–ø–µ—à–Ω–æ–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ (–∞—Ä—Ö–∏–≤)
```json
{
  "status": "success",
  "filename": "documents.zip",
  "files": [
    {
      "filename": "document1.pdf",
      "path": "documents/document1.pdf",
      "size": 524288,
      "type": "pdf",
      "text": "–¢–µ–∫—Å—Ç –∏–∑ –ø–µ—Ä–≤–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞..."
    },
    {
      "filename": "image1.jpg",
      "path": "documents/images/image1.jpg",
      "size": 102400,
      "type": "jpg",
      "text": "–†–∞—Å–ø–æ–∑–Ω–∞–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è..."
    }
  ]
}
```

#### –û—à–∏–±–∫–∞
```json
{
  "status": "error",
  "filename": "broken.pdf",
  "message": "–§–∞–π–ª –ø–æ–≤—Ä–µ–∂–¥–µ–Ω –∏–ª–∏ —Ñ–æ—Ä–º–∞—Ç –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è."
}
```

### –ö–æ–¥—ã –æ—à–∏–±–æ–∫

- `400` - –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –∑–∞–ø—Ä–æ—Å (–æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç Content-Length –∏–ª–∏ –Ω–µ–≤–µ—Ä–Ω—ã–π base64)
- `413` - –§–∞–π–ª —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–π (>20MB)
- `415` - –ù–µ–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–π —Ñ–æ—Ä–º–∞—Ç –∏–ª–∏ –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ç–∏–ø–∞ —Ñ–∞–π–ª–∞
- `422` - –ü–æ–≤—Ä–µ–∂–¥–µ–Ω–Ω—ã–π —Ñ–∞–π–ª, –ø—É—Å—Ç–æ–π –∏–ª–∏ –∑–∞—â–∏—â–µ–Ω–Ω—ã–π –ø–∞—Ä–æ–ª–µ–º
- `504` - –ü—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç –≤—Ä–µ–º–µ–Ω–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏

### –í—ã–±–æ—Ä —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞

**–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `/v1/extract/file`** –∫–æ–≥–¥–∞:
- –ó–∞–≥—Ä—É–∂–∞–µ—Ç–µ —Ñ–∞–π–ª—ã –Ω–∞–ø—Ä—è–º—É—é —á–µ—Ä–µ–∑ —Ñ–æ—Ä–º—É –∏–ª–∏ drag&drop
- –†–∞–±–æ—Ç–∞–µ—Ç–µ —Å –ª–æ–∫–∞–ª—å–Ω—ã–º–∏ —Ñ–∞–π–ª–∞–º–∏
- –ò–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ—Ç–µ—Å—å —Å —Ñ–∞–π–ª–æ–≤—ã–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏

**–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `/v1/extract/base64`** –∫–æ–≥–¥–∞:
- –§–∞–π–ª —É–∂–µ –∑–∞–∫–æ–¥–∏—Ä–æ–≤–∞–Ω –≤ base64 –≤ –≤–∞—à–µ–π —Å–∏—Å—Ç–µ–º–µ
- –ò–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ—Ç–µ—Å—å —Å API, –∫–æ—Ç–æ—Ä—ã–µ –ø–µ—Ä–µ–¥–∞—é—Ç —Ñ–∞–π–ª—ã –≤ base64
- –†–∞–±–æ—Ç–∞–µ—Ç–µ —Å –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π —á–µ—Ä–µ–∑ JSON
- –§–∞–π–ª —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –≤ –≤–∏–¥–µ base64

### –ü—Ä–∏–º–µ—Ä—ã –æ—à–∏–±–æ–∫ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

```json
{
  "status": "error",
  "filename": "document.pdf",
  "message": "–û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –∑–∞–≥–æ–ª–æ–≤–æ–∫ Content-Length. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ —É–∫–∞–∑–∞–Ω –≤ –∑–∞–ø—Ä–æ—Å–µ."
}
```

```json
{
  "status": "error",
  "filename": "malicious.txt",
  "message": "–†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ñ–∞–π–ª–∞ –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –µ–≥–æ —Å–æ–¥–µ—Ä–∂–∏–º–æ–º—É. –í–æ–∑–º–æ–∂–Ω–∞—è –ø–æ–¥–¥–µ–ª–∫–∞ —Ç–∏–ø–∞ —Ñ–∞–π–ª–∞."
}
```

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

API –≤–∫–ª—é—á–∞–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ —É—Ä–æ–≤–Ω–µ–π –∑–∞—â–∏—Ç—ã:

### üõ°Ô∏è –°–∞–Ω–∏—Ç–∏–∑–∞—Ü–∏—è –∏–º–µ–Ω —Ñ–∞–π–ª–æ–≤
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ –∏–º–µ–Ω —Ñ–∞–π–ª–æ–≤ –æ—Ç –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ –æ–ø–∞—Å–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤
- –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –∞—Ç–∞–∫ —Ç–∏–ø–∞ path traversal (`../../../etc/passwd`)
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –±–µ–∑–æ–ø–∞—Å–Ω—ã—Ö –∏–º–µ–Ω –¥–ª—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏

### üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤ —Ñ–∞–π–ª–æ–≤
- –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è —Ñ–∞–π–ª–∞ –µ–≥–æ —Ä–µ–∞–ª—å–Ω–æ–º—É —Å–æ–¥–µ—Ä–∂–∏–º–æ–º—É
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ MIME-—Ç–∏–ø–æ–≤ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∏—Å—Ç–∏–Ω–Ω–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∞
- –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏ –∏—Å–ø–æ–ª–Ω—è–µ–º—ã—Ö —Ñ–∞–π–ª–æ–≤ –ø–æ–¥ –≤–∏–¥–æ–º —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö

### üö´ –ó–∞—â–∏—Ç–∞ –æ—Ç DoS-–∞—Ç–∞–∫
- –û–±—è–∑–∞—Ç–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –∑–∞–≥–æ–ª–æ–≤–∫–∞ `Content-Length`
- –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤ –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞ —Ñ–∞–π–ª–∞ (20MB)

### üóúÔ∏è –ó–∞—â–∏—Ç–∞ –æ—Ç zip-–±–æ–º–±
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ —Ä–∞—Å–ø–∞–∫–æ–≤–∞–Ω–Ω–æ–≥–æ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ –∞—Ä—Ö–∏–≤–æ–≤ (100MB)
- –ö–æ–Ω—Ç—Ä–æ–ª—å –≥–ª—É–±–∏–Ω—ã –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç–∏ –∞—Ä—Ö–∏–≤–æ–≤ (–º–∞–∫—Å–∏–º—É–º 3 —É—Ä–æ–≤–Ω—è)
- –ò–∑–æ–ª—è—Ü–∏—è –ø—Ä–æ—Ü–µ—Å—Å–∞ —Ä–∞—Å–ø–∞–∫–æ–≤–∫–∏ —Å —Ç–∞–π–º–∞—É—Ç–æ–º

### üìã –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –ø–æ–ø—ã—Ç–æ–∫ –Ω–∞—Ä—É—à–µ–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –æ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
- –¢—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∞ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã—Ö —É–≥—Ä–æ–∑

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
# –ü–æ—Ä—Ç API (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 7555)
API_PORT=7555

# –†–µ–∂–∏–º –æ—Ç–ª–∞–¥–∫–∏
DEBUG=false

# –Ø–∑—ã–∫–∏ –¥–ª—è OCR (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: rus+eng)
OCR_LANGUAGES=rus+eng

# –¢–∞–π–º–∞—É—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤ —Å–µ–∫—É–Ω–¥–∞—Ö (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 300)
PROCESSING_TIMEOUT_SECONDS=300

# –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ worker-–ø—Ä–æ—Ü–µ—Å—Å–æ–≤ uvicorn (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 1)
# –î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è: 2 * (–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —è–¥–µ—Ä CPU) + 1
WORKERS=1

# –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ –≤ –±–∞–π—Ç–∞—Ö (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 20MB)
MAX_FILE_SIZE=20971520

# –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –∞—Ä—Ö–∏–≤–∞ –≤ –±–∞–π—Ç–∞—Ö (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 20MB)
MAX_ARCHIVE_SIZE=20971520

# –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä —Ä–∞—Å–ø–∞–∫–æ–≤–∞–Ω–Ω–æ–≥–æ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 100MB)
MAX_EXTRACTED_SIZE=104857600

# –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –≥–ª—É–±–∏–Ω–∞ –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç–∏ –∞—Ä—Ö–∏–≤–æ–≤ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 3)
MAX_ARCHIVE_NESTING=3
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ .env —Ñ–∞–π–ª–∞

```bash
cp env_example .env
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ .env –ø–æ–¥ –≤–∞—à–∏ –Ω—É–∂–¥—ã
```

## –ö–æ–º–∞–Ω–¥—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### Makefile –∫–æ–º–∞–Ω–¥—ã

```bash
# –ü–æ–º–æ—â—å
make help

# –°–±–æ—Ä–∫–∞ –∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ
make build          # –°–æ–±—Ä–∞—Ç—å Docker –æ–±—Ä–∞–∑
make dev            # –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
make prod           # –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ

# –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–æ–º
make stop           # –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
make logs           # –ü–æ–∫–∞–∑–∞—Ç—å –ª–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
make status         # –ü–æ–∫–∞–∑–∞—Ç—å —Å—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤

# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
make test           # –ü–æ–ª–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å –ø–æ–∫—Ä—ã—Ç–∏–µ–º
make test-unit      # –¢–æ–ª—å–∫–æ unit —Ç–µ—Å—Ç—ã
make test-integration # –¢–æ–ª—å–∫–æ integration —Ç–µ—Å—Ç—ã
make test-docker    # –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ Docker
make test-coverage  # –ü–æ–∫–∞–∑–∞—Ç—å –æ—Ç—á–µ—Ç –ø–æ–∫—Ä—ã—Ç–∏—è
make test-legacy    # –°—Ç–∞—Ä—ã–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã

# –û—á–∏—Å—Ç–∫–∞
make clean          # –ü–æ–ª–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ —Å–∏—Å—Ç–µ–º—ã
```

### Docker Compose –∫–æ–º–∞–Ω–¥—ã

```bash
# –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞
docker-compose up

# –ü—Ä–æ–¥–∞–∫—à–µ–Ω
docker-compose -f docker-compose.yml -f docker-compose.prod.yml up -d

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞
docker-compose down
```

## –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è
python -m venv venv
source venv/bin/activate  # Linux/Mac
# –∏–ª–∏
venv\Scripts\activate     # Windows

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
pip install -r requirements.txt

# –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
uvicorn app.main:app --reload --host 0.0.0.0 --port 7555
```

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ main.py           # –ì–ª–∞–≤–Ω—ã–π –º–æ–¥—É–ª—å FastAPI
‚îÇ   ‚îú‚îÄ‚îÄ config.py         # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ extractors.py     # –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ –∏–∑ –≤—Å–µ—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ utils.py          # –£—Ç–∏–ª–∏—Ç—ã (–≤–∫–ª—é—á–∞—è —Ñ—É–Ω–∫—Ü–∏–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏)
‚îú‚îÄ‚îÄ tests/                # –¢–µ—Å—Ç–æ–≤—ã–µ —Ñ–∞–π–ª—ã (126+ —Ñ–∞–π–ª–æ–≤ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤)
‚îú‚îÄ‚îÄ docs/
‚îÇ   ‚îî‚îÄ‚îÄ TZ.md            # –¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –∑–∞–¥–∞–Ω–∏–µ
‚îú‚îÄ‚îÄ requirements.txt      # Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ requirements-test.txt # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
‚îú‚îÄ‚îÄ Dockerfile           # Docker –æ–±—Ä–∞–∑ —Å —Å–∏—Å—Ç–µ–º–Ω—ã–º–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏
‚îú‚îÄ‚îÄ docker-compose.yml   # –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞
‚îú‚îÄ‚îÄ docker-compose.prod.yml # –ü—Ä–æ–¥–∞–∫—à–µ–Ω
‚îú‚îÄ‚îÄ Makefile            # –ö–æ–º–∞–Ω–¥—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
‚îú‚îÄ‚îÄ run_tests.sh        # –°–∫—Ä–∏–ø—Ç legacy —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
‚îú‚îÄ‚îÄ CHANGELOG.md        # –ñ—É—Ä–Ω–∞–ª –∏–∑–º–µ–Ω–µ–Ω–∏–π
‚îî‚îÄ‚îÄ README.md           # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤
make test

# –û—Ç–¥–µ–ª—å–Ω—ã–µ –≤–∏–¥—ã —Ç–µ—Å—Ç–æ–≤
make test-unit         # Unit —Ç–µ—Å—Ç—ã
make test-integration  # Integration —Ç–µ—Å—Ç—ã
make test-docker       # –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ Docker
```

### –°–∏—Å—Ç–µ–º–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

**–°–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:**
- **Framework**: pytest + pytest-asyncio
- **–ü–æ–∫—Ä—ã—Ç–∏–µ**: pytest-cov —Å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º –ø–æ—Ä–æ–≥–æ–º 30%
- **HTTP —Ç–µ—Å—Ç—ã**: httpx –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è API
- **–ú–æ–∫–∏**: pytest-mock –¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- **–¢–∏–ø—ã —Ç–µ—Å—Ç–æ–≤**: Unit, Integration, Real Files

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç–æ–≤:**
```
tests/
‚îú‚îÄ‚îÄ conftest.py          # –û–±—â–∏–µ —Ñ–∏–∫—Å—Ç—É—Ä—ã
‚îú‚îÄ‚îÄ test_config.py       # –¢–µ—Å—Ç—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ test_extractors.py   # –¢–µ—Å—Ç—ã –∏–∑–≤–ª–µ—á–µ–Ω–∏—è —Ç–µ–∫—Å—Ç–∞
‚îú‚îÄ‚îÄ test_integration.py  # Integration —Ç–µ—Å—Ç—ã —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ —Ñ–∞–π–ª–∞–º–∏
‚îú‚îÄ‚îÄ test_main.py         # –¢–µ—Å—Ç—ã API —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤
‚îú‚îÄ‚îÄ test_utils.py        # –¢–µ—Å—Ç—ã —É—Ç–∏–ª–∏—Ç
‚îî‚îÄ‚îÄ [126+ test files]    # –†–µ–∞–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
```

**–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:**
- **–í—Å–µ–≥–æ —Ç–µ—Å—Ç–æ–≤**: 120+
- **–ü–æ–∫—Ä—ã—Ç–∏–µ –∫–æ–¥–∞**: 37%+ (–≤—ã—à–µ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–≥–æ –ø–æ—Ä–æ–≥–∞ 30%)
- **–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã**: 130+
- **–¢–µ—Å—Ç–æ–≤—ã–µ —Ñ–∞–π–ª—ã**: 126+
- **–£—Å–ø–µ—à–Ω–æ—Å—Ç—å**: 94.4% (119 –∏–∑ 126 —Ñ–∞–π–ª–æ–≤)

### Legacy —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –ó–∞–ø—É—Å–∫ —Å—Ç–∞—Ä—ã—Ö —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤
make test-legacy
```

–°–∫—Ä–∏–ø—Ç `run_tests.sh`:
1. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å API
2. –¢–µ—Å—Ç–∏—Ä—É–µ—Ç –≤—Å–µ —Ñ–∞–π–ª—ã –∏–∑ –ø–∞–ø–∫–∏ `tests/`
3. –°–æ–∑–¥–∞–µ—Ç —Ñ–∞–π–ª—ã —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤:
   - `filename.ok.txt` - —É—Å–ø–µ—à–Ω–æ–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ
   - `filename.err.txt` - –æ—à–∏–±–∫–∏
4. –í—ã–≤–æ–¥–∏—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ–∫—Ä—ã—Ç–∏—è —Ñ–æ—Ä–º–∞—Ç–æ–≤

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ —Ñ–∞–π–ª–∞–º–∏

–ù–æ–≤—ã–π –∫–ª–∞—Å—Å `TestAllRealFiles` –≤ `tests/test_integration.py`:
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—Ö–æ–¥–∏—Ç –≤—Å–µ —Ñ–∞–π–ª—ã —Å –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–º–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è–º–∏
- –ò—Å–∫–ª—é—á–∞–µ—Ç —Å–ª—É–∂–µ–±–Ω—ã–µ —Ñ–∞–π–ª—ã –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–æ–≤
- –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ñ–∞–π–ª—ã –≤ API –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
- –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –¥–µ—Ç–∞–ª—å–Ω—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ —Ç–∏–ø–∞–º —Ñ–∞–π–ª–æ–≤

## –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ API, –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –ø–æ –∞–¥—Ä–µ—Å–∞–º:

- **Swagger UI**: http://localhost:7555/docs
- **ReDoc**: http://localhost:7555/redoc

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

### –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ª–æ–≥–∏

API –≤–µ–¥–µ—Ç –ø–æ–¥—Ä–æ–±–Ω—ã–µ –ª–æ–≥–∏:
- –í—Ö–æ–¥—è—â–∏–µ –∑–∞–ø—Ä–æ—Å—ã —Å –≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –º–µ—Ç–∫–∞–º–∏
- –í—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∫–∞–∂–¥–æ–≥–æ —Ñ–∞–π–ª–∞
- –û—à–∏–±–∫–∏ —Å –ø–æ–ª–Ω—ã–º traceback
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è (–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ñ–∞–π–ª–æ–≤, –¥–ª–∏–Ω–∞ —Ç–µ–∫—Å—Ç–∞)
- –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤

```bash
# Docker –ª–æ–≥–∏
make logs

# –°—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
make status

# –ò–ª–∏ –Ω–∞–ø—Ä—è–º—É—é
docker-compose logs -f
```

## –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

- **–ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞**: 20 MB
- **–ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –∞—Ä—Ö–∏–≤–∞**: 20 MB
- **–ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä —Ä–∞—Å–ø–∞–∫–æ–≤–∞–Ω–Ω–æ–≥–æ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ**: 100 MB
- **–¢–∞–π–º–∞—É—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏**: 300 —Å–µ–∫—É–Ω–¥ (5 –º–∏–Ω—É—Ç) –¥–ª—è –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- **–¢–∞–π–º–∞—É—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∞—Ä—Ö–∏–≤–æ–≤**: 300 —Å–µ–∫—É–Ω–¥ (5 –º–∏–Ω—É—Ç) —Å –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—ã–º –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ–º
- **–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –≥–ª—É–±–∏–Ω–∞ –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç–∏ –∞—Ä—Ö–∏–≤–æ–≤**: 3 —É—Ä–æ–≤–Ω—è

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

- **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞**: –í—Å–µ CPU-bound –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –ø—É–ª–µ –ø–æ—Ç–æ–∫–æ–≤
- **–ù–µ–±–ª–æ–∫–∏—Ä—É—é—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**: Event loop –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ —Ç—è–∂–µ–ª—ã—Ö —Ñ–∞–π–ª–æ–≤
- **–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ worker-–ø—Ä–æ—Ü–µ—Å—Å—ã**: –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞
- **–ò–∑–æ–ª—è—Ü–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π**: –°–±–æ–π –≤ –æ–¥–Ω–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏ –Ω–µ –≤–ª–∏—è–µ—Ç –Ω–∞ –¥—Ä—É–≥–∏–µ

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã —Ñ–∞–π–ª–æ–≤
- –°–∂–∏–º–∞–π—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π
- –î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ `WORKERS=9` (–∏–ª–∏ 2 * –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —è–¥–µ—Ä CPU + 1)
- –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –Ω–∞–ª–∏—á–∏–∏ –∑–∞–≥–æ–ª–æ–≤–∫–∞ Content-Length –≤ –∑–∞–ø—Ä–æ—Å–∞—Ö

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏

| –¢–∏–ø —Ñ–∞–π–ª–∞ | –°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ | –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ |
|-----------|------------------------|-------------|
| –¢–µ–∫—Å—Ç–æ–≤—ã–µ —Ñ–∞–π–ª—ã | <1–º—Å | –ê–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–æ–¥–∏—Ä–æ–≤–∫–∏ |
| –ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ | <1–º—Å | 50+ —è–∑—ã–∫–æ–≤ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è |
| –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (OCR) | 100-500–º—Å | –†—É—Å—Å–∫–∏–π –∏ –∞–Ω–≥–ª–∏–π—Å–∫–∏–π |
| PDF –¥–æ–∫—É–º–µ–Ω—Ç—ã | 50-200–º—Å | –° OCR –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π |
| Office –¥–æ–∫—É–º–µ–Ω—Ç—ã | 100-1000–º—Å | –ü–æ–ª–Ω–æ–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ |
| DOCX –¥–æ–∫—É–º–µ–Ω—Ç—ã | 100-800–º—Å | –í–∫–ª—é—á–∞—è –∫–æ–ª–æ–Ω—Ç–∏—Ç—É–ª—ã, —Å–Ω–æ—Å–∫–∏, –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ |
| PPTX –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–∏ | 100-600–º—Å | –í–∫–ª—é—á–∞—è –∑–∞–º–µ—Ç–∫–∏ —Å–ø–∏–∫–µ—Ä–∞ |
| –¢–∞–±–ª–∏—Ü—ã (–±–æ–ª—å—à–∏–µ) | 100-300–º—Å | –í—Å–µ –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã |
| –ê—Ä—Ö–∏–≤—ã | 200-2000–º—Å | –¢–∞–π–º–∞—É—Ç 300 —Å–µ–∫—É–Ω–¥ |

## –ê—Ä—Ö–∏–≤—ã

### –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã –∞—Ä—Ö–∏–≤–æ–≤

- **ZIP**: –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç, –±—ã—Å—Ç—Ä–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
- **RAR**: –¢—Ä–µ–±—É–µ—Ç –±–∏–±–ª–∏–æ—Ç–µ–∫—É rarfile
- **7Z**: –¢—Ä–µ–±—É–µ—Ç –±–∏–±–ª–∏–æ—Ç–µ–∫—É py7zr
- **TAR**: –í–∫–ª—é—á–∞—è —Å–∂–∞—Ç—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã (GZ, BZ2, XZ)

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –∞—Ä—Ö–∏–≤–æ–≤

1. **–†–∞—Å–ø–∞–∫–æ–≤–∫–∞**: –ê—Ä—Ö–∏–≤ —Ä–∞—Å–ø–∞–∫–æ–≤—ã–≤–∞–µ—Ç—Å—è –≤–æ –≤—Ä–µ–º–µ–Ω–Ω—É—é –ø–∞–ø–∫—É
2. **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è**: –ò–≥–Ω–æ—Ä–∏—Ä—É—é—Ç—Å—è —Å–∏—Å—Ç–µ–º–Ω—ã–µ —Ñ–∞–π–ª—ã (.DS_Store, Thumbs.db)
3. **–û–±—Ä–∞–±–æ—Ç–∫–∞**: –ö–∞–∂–¥—ã–π —Ñ–∞–π–ª –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è —Å–æ–≥–ª–∞—Å–Ω–æ –µ–≥–æ —Ç–∏–ø—É
4. **–û–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ**: –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ–±—ä–µ–¥–∏–Ω—è—é—Ç—Å—è –≤ –µ–¥–∏–Ω—ã–π –æ—Ç–≤–µ—Ç
5. **–û—á–∏—Å—Ç–∫–∞**: –í—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–¥–∞–ª—è—é—Ç—Å—è
6. **–¢–∞–π–º–∞—É—Ç**: –û–±—Ä–∞–±–æ—Ç–∫–∞ –∞—Ä—Ö–∏–≤–æ–≤ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∞ 300 —Å–µ–∫—É–Ω–¥–∞–º–∏ –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ —Å–∏—Å—Ç–µ–º—ã

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∞—Ä—Ö–∏–≤–æ–≤

- **–ó–∞—â–∏—Ç–∞ –æ—Ç zip-–±–æ–º–±**: –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ —Ä–∞—Å–ø–∞–∫–æ–≤–∞–Ω–Ω–æ–≥–æ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ
- **–ó–∞—â–∏—Ç–∞ –æ—Ç path traversal**: –°–∞–Ω–∏—Ç–∏–∑–∞—Ü–∏—è –∏–º–µ–Ω —Ñ–∞–π–ª–æ–≤ –≤ –∞—Ä—Ö–∏–≤–∞—Ö
- **–ö–æ–Ω—Ç—Ä–æ–ª—å –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç–∏**: –ú–∞–∫—Å–∏–º—É–º 3 —É—Ä–æ–≤–Ω—è –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç–∏ –∞—Ä—Ö–∏–≤–æ–≤
- **–ò–∑–æ–ª—è—Ü–∏—è –ø—Ä–æ—Ü–µ—Å—Å–∞**: –†–∞—Å–ø–∞–∫–æ–≤–∫–∞ –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –ø—Ä–æ—Ü–µ—Å—Å–µ —Å —Ç–∞–π–º–∞—É—Ç–æ–º
- **–¢–∞–π–º–∞—É—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏**: –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∞—Ä—Ö–∏–≤–æ–≤ —á–µ—Ä–µ–∑ 300 —Å–µ–∫—É–Ω–¥

## –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

### Docker (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
# –°–±–æ—Ä–∫–∞
docker build -t text-extraction-api .

# –ó–∞–ø—É—Å–∫
docker run -p 7555:7555 text-extraction-api
```

### Kubernetes

```yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: text-extraction-api
spec:
  replicas: 3
  selector:
    matchLabels:
      app: text-extraction-api
  template:
    metadata:
      labels:
        app: text-extraction-api
    spec:
      containers:
      - name: api
        image: text-extraction-api:latest
        ports:
        - containerPort: 7555
        env:
        - name: API_PORT
          value: "7555"
        - name: WORKERS
          value: "9"
        - name: OCR_LANGUAGES
          value: "rus+eng"
        resources:
          requests:
            memory: "512Mi"
            cpu: "250m"
          limits:
            memory: "2Gi"
            cpu: "1000m"
```

## –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

1. **OCR –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç**
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —É—Å—Ç–∞–Ω–æ–≤–∫—É tesseract –≤ Docker –æ–±—Ä–∞–∑–µ
   - –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –Ω–∞–ª–∏—á–∏–∏ —è–∑—ã–∫–æ–≤—ã—Ö –ø–∞–∫–µ—Ç–æ–≤ (rus+eng)

2. **–û—à–∏–±–∫–∏ –ø–∞–º—è—Ç–∏**
   - –£–º–µ–Ω—å—à–∏—Ç–µ —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–æ–≤ –∏–ª–∏ –∞—Ä—Ö–∏–≤–æ–≤
   - –£–≤–µ–ª–∏—á—å—Ç–µ –ª–∏–º–∏—Ç—ã –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
   - –£–º–µ–Ω—å—à–∏—Ç–µ `MAX_EXTRACTED_SIZE`

3. **–¢–∞–π–º–∞—É—Ç—ã**
   - –£–≤–µ–ª–∏—á—å—Ç–µ `PROCESSING_TIMEOUT_SECONDS`
   - –£–º–µ–Ω—å—à–∏—Ç–µ —Å–ª–æ–∂–Ω–æ—Å—Ç—å –≤—Ö–æ–¥–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–∑–º–µ—Ä –∞—Ä—Ö–∏–≤–æ–≤
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ –∞—Ä—Ö–∏–≤–æ–≤ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ 300 —Å–µ–∫—É–Ω–¥

4. **–ê—Ä—Ö–∏–≤—ã –Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è**
   - –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –Ω–∞–ª–∏—á–∏–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫ rarfile –∏ py7zr
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–∑–º–µ—Ä –∞—Ä—Ö–∏–≤–∞ –∏ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≥–ª—É–±–∏–Ω—É –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç–∏
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø—Ä–µ–∫—Ä–∞—â–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ 300 —Å–µ–∫—É–Ω–¥ (—Å–º. —Ç–∞–π–º–∞—É—Ç)

5. **–ù–µ–ø–æ–ª–Ω–æ–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞**
   - DOCX: –¢–µ–ø–µ—Ä—å –≤–∫–ª—é—á–∞–µ—Ç –∫–æ–ª–æ–Ω—Ç–∏—Ç—É–ª—ã, —Å–Ω–æ—Å–∫–∏ –∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏
   - PPTX: –¢–µ–ø–µ—Ä—å –≤–∫–ª—é—á–∞–µ—Ç –∑–∞–º–µ—Ç–∫–∏ —Å–ø–∏–∫–µ—Ä–∞
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–µ—Ä—Å–∏—é API (–¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å 1.8.6+)

### –õ–æ–≥–∏ –æ—Ç–ª–∞–¥–∫–∏

```bash
# –í–∫–ª—é—á–µ–Ω–∏–µ –æ—Ç–ª–∞–¥–∫–∏
export DEBUG=true

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ø–æ–¥—Ä–æ–±–Ω—ã—Ö –ª–æ–≥–æ–≤
make logs

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
make status
```

### –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

```bash
# –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ API
curl http://localhost:7555/health

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤
curl http://localhost:7555/v1/supported-formats

# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å –ø—Ä–æ—Å—Ç—ã–º —Ñ–∞–π–ª–æ–º
curl -X POST -F "file=@tests/test.txt" http://localhost:7555/v1/extract/file
```

## –ö–æ–Ω—Ç—Ä–∏–±—É—Ü–∏—è

1. –§–æ—Ä–∫ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
2. –°–æ–∑–¥–∞–Ω–∏–µ –≤–µ—Ç–∫–∏ –¥–ª—è —Ñ–∏—á–∏
3. –ö–æ–º–º–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π
4. –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ (`make test`)
5. –ü—É—à –≤ –≤–µ—Ç–∫—É
6. –°–æ–∑–¥–∞–Ω–∏–µ Pull Request

## –õ–∏—Ü–µ–Ω–∑–∏—è

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –ª–∏—Ü–µ–Ω–∑–∏—Ä–æ–≤–∞–Ω –ø–æ–¥ MIT License - —Å–º. —Ñ–∞–π–ª [LICENSE](LICENSE).

## –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–î–ª—è –≤–æ–ø—Ä–æ—Å–æ–≤ –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∏:
- GitHub Issues
- –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: `docs/TZ.md`

---

**–í–µ—Ä—Å–∏—è**: 1.9.0
**–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫**: –ë–∞—Ä–∏–ª–∫–æ –í–∏—Ç–∞–ª–∏–π
